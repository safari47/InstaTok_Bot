ms_token1 = "RFHwY7LKpUVPnzfxlNu5n70pGHJAezOVJsb4BDPbTVTssmq-7OlxQwiOUfEhLTxPPkfMU1tfRWyylIKp_KRHZDNNe71XZ7aFxMuOZRl9ZkcCLNJ0Epps7j88tMOzkf5LU_8nFCN1rr3r7qB4JKrWuA4T"
ms_token2 = "aNzSYr5wPo-_UPgOa6MEl3Sz_LyNuz9q5Zs-vP0hpTl0VcakT2a1cX_q5n9CnWERMBi8bsg1uH6NTejBZst4DpwbV5QT63u0O_UvJx0F_YJcgNC4zyPm2Sb2zivS81CLVsxgXPrRVsqxUaId0pPFTiq3"
cookies = [
    {
        "domain": ".tiktok.com",
        "expirationDate": 1739615576.954177,  # convert string to float
        "hostOnly": False,
        "httpOnly": False,
        "name": "_ttp",
        "path": "/",
        "sameSite": "no_restriction",
        "secure": True,
        "session": False,
        "storeId": "0",
        "value": "2bJ2qUNmFZvif2pgFdEjLAsEoXS",
    },
    {
        "domain": ".tiktok.com",
        "hostOnly": False,
        "httpOnly": True,
        "name": "tt_csrf_token",
        "path": "/",
        "sameSite": "lax",
        "secure": True,
        "session": True,
        "storeId": "0",
        "value": "15P4kArP-zumOygZ2SA-zBCEA-BGbb6bLQE4",
    },
    {
        "domain": ".tiktok.com",
        "expirationDate": 1730442595.122381,  # convert string to float
        "hostOnly": False,
        "httpOnly": False,
        "name": "ak_bmsc",
        "path": "/",
        "sameSite": "unspecified",
        "secure": False,
        "session": False,
        "storeId": "0",
        "value": "131FB4AF5C961B9AEE7ADBC65C5C5111~000000000000000000000000000000~YAAQsLUuFyiFttuSAQAAca/85Rl8BURmLZI47a7y/QjnjnRs1uQ6/pw0+OT6Hsv8Ypz+LZ28TzBjKyHvvmhbKueefiOu3+VTgkfyvO4F1BLKC2qmcDIfP2zaxvmAy9AuyqqtC8ZObNtePxHIIFX4KRolW76M0dT3gswpSGcGpPzxXQjk3JSYAS8tpaWJBcvga3Gk46NHql90DXQS9K6IJOhC0yrgwrB1+ELIRAywC907oIzucYg+Tcce9hLRGnlPQNXO68zLXUVGQDZUuhUgybhKJOjmihcGwRX0URcLsuq+pmbRYAx6AO0MaX3Xj67PDciVouadn6GU+0p/pi1EtH24EpUZlE8lviU9PV0OcbgJyJR40zMHvz5vTU+NXJCzcwcWANVg25izbQk=",
    },
    {
        "domain": ".tiktok.com",
        "expirationDate": 1745987492.877254,  # convert string to float
        "hostOnly": False,
        "httpOnly": False,
        "name": "tt_chain_token",
        "path": "/",
        "sameSite": "unspecified",
        "secure": False,
        "session": False,
        "storeId": "0",
        "value": "b4WDEBo1rV8phnwvVHR1Yg==",
    },
    {
        "domain": ".www.tiktok.com",
        "expirationDate": 1756355493,  # convert string to int
        "hostOnly": False,
        "httpOnly": False,
        "name": "tiktok_webapp_theme_source",
        "path": "/",
        "sameSite": "unspecified",
        "secure": True,
        "session": False,
        "storeId": "0",
        "value": "auto",
    },
    {
        "domain": ".www.tiktok.com",
        "expirationDate": 1756355493,  # convert string to int
        "hostOnly": False,
        "httpOnly": False,
        "name": "tiktok_webapp_theme",
        "path": "/",
        "sameSite": "unspecified",
        "secure": True,
        "session": False,
        "storeId": "0",
        "value": "dark",
    },
    {
        "domain": ".www.tiktok.com",
        "expirationDate": 1730867402,  # convert string to int
        "hostOnly": False,
        "httpOnly": False,
        "name": "perf_feed_cache",
        "path": "/",
        "sameSite": "unspecified",
        "secure": True,
        "session": False,
        "storeId": "0",
        "value": "{%22expireTimestamp%22:1730606400000%2C%22itemIds%22:[%227405751331790556458%22%2C%227427120395402153258%22%2C%227425208287332912430%22]}",
    },
    {
        "domain": ".tiktok.com",
        "expirationDate": 1730442594.877423,  # convert string to float
        "hostOnly": False,
        "httpOnly": False,
        "name": "bm_sv",
        "path": "/",
        "sameSite": "unspecified",
        "secure": True,
        "session": False,
        "storeId": "0",
        "value": "B536D93EAF954644031D6A97276A80CA~YAAQu7UuF/F479mSAQAAUi3+5RlvMwBNbUvGYqdglyV0xG386ZRtpRG92QLMX1Wn8PmayTQYx9WEK4PxyXSLVLQCEJUu60JWOV2Yd4p70sSx8M/Qg+dScdx4Ef47PQ+EtZafc+CZC9CZ8w0rbGYjLoHXOAzT82tlQFmaHG4JOtqvBjWxAA93kSL6gDt1tmWb0zlVMhirQaNqPBRPu00ZJet6Pad9RP2g5vzbvlrJcX95z2ZNQnVbfJ+ceykR1nOa~1",
    },
    {
        "domain": ".tiktok.com",
        "expirationDate": 1761971493.713894,  # convert string to float
        "hostOnly": False,
        "httpOnly": True,
        "name": "ttwid",
        "path": "/",
        "sameSite": "no_restriction",
        "secure": True,
        "session": False,
        "storeId": "0",
        "value": "1%7CgMHQ_u8j-pWXMgZ5ccgkwQ_F6v80JwwMXqK-DdLGc9E%7C1730435494%7C8c341f7b8547523cf0c8e9f7af28d8f89327b85d6266717bb8135f13f3e0b4ad",
    },
    # Other cookies can go here
]

# set your own ms_token, think it might need to have visited a profile


async def get_video_example():
    async with TikTokApi() as api:
        await api.create_sessions(
            ms_tokens=[ms_token1, ms_token2],
            num_sessions=3,
            sleep_after=3,
            
        )
        video = api.video(
            url="https://www.tiktok.com/@lol_liang/video/7400671149224496426"
        )

        video_info = await video.info()  # is HTML request, so avoid using this too much
        print(video_info)
        video_bytes = await video.bytes()
        with open("video.mp4", "wb") as f:
            f.write(video_bytes)


if __name__ == "__main__":
    asyncio.run(get_video_example())
